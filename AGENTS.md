# Agent Guidelines

## Important!
- Do not edit this file or any files that you use for direction.
- You are editing an existing project, do not alter the project structure!
- Do not edit the project's README.md, LICENSE, or any .sh or .bat scripts.

## Overview
Typed Go wrappers for the ISC Kea **Control Agent**, **DHCPv4**, **DHCPv6**, and the **DDNS** APIs.

## Documentation
- Real curl outputs in `docs/kea/calls/` are the **canonical** response shapes and test fixtures.
- `docs/kea/LINKS.md` points to vendor docs and API refs.
- `docs/codex/goals.md` describes the project's goals.
- Each service directory (`agent/`, `dhcp4/`, `dhcp6/`, `ddns/`) contains a `commands.manifest.json` enumerating KEA API calls to implement.

## Project Layout
| Path | Purpose |
|------|---------|
| `client/` | Core HTTP client and JSON helpers (`Call`, `CallAndDecode`, etc.). |
| `agent/`, `dhcp4/`, `dhcp6/`, `ddns/` | Service wrappers built on `client`. Each exposes a `Service` and typed command funcs. |
| `types/` | Shared envelope/result types (`ResultItem`, `MultiResult`, `ResultCode`). |
| `internal/utils/` | Shared miscellaneous utilities. |
| `internal/testenv/` | Mock servers + Docker helpers for integration tests. |
| `examples/` | Runnable examples of common API flows. |
| `docs/codex/` | Important information for Codex. | 
| `docs/kea/calls/` | Real curl requests/responses used as reference and for golden JSON. |
| `docs/dev/` | Development environment setup - ignore. |
| `docs/go/` | Golang information - ignore. | 

## Testing
- **You do not run tests!** You only write/update tests.
- Units tests: `_test.go` next to code.
- Integration tests: `_int_test.go` next to code; use `internal/testenv/` utilities.
- Prefer golden JSON from live Kea over docs; widen/narrow structs to match reality.
- Keep assertions minimal but meaningful (e.g., `result == 0`, key fields present).

## Code Style
- Indentation: **two spaces** (no tabs).
- Public names: **PascalCase** (`StatusGet`, `ConfigGet`, `ListCommands`, â€¦).
- Locals: **camelCase**.
- Max line length ~100 chars.
- No third-party logging libs.
- One exported `Service` per package; path constants per service (`/control-agent`, `/dhcp4`, `/dhcp6`, `/ddns`).
- Typed wrappers (avoid `map[string]any` outside tests)

## Allowed changes
- Implement missing commands listed in `commands.manifest.json`.
- Add/adjust typed request/response structs to match actual shapes in `docs/kea/calls/`.
- Add minimal examples under `examples/` only when a new command is added.

## Git Rules
- Do nothing with git.
